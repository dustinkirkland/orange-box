orange-box (1.9-0ubuntu1) utopic; urgency=medium

  * usr/share/orange-box/nodelists/OrangeBox03:
    - added node list of mac addresses
    - I expect to deprecate and remove all of these very soon, however
  * debian/postinst:
    - clean up user's examples directory; this was causing reinstalls to fail
  * debian/control, debian/postinst, usr/share/orange-box/orange-box-
    background.png:
    - add explicity dependencies for remmina and gsettings
    - set the desktop background to an orange box image
    - clean up the default launcher favorites

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 02 May 2014 17:37:16 -0500

orange-box (1.8-0ubuntu1) unstable; urgency=medium

  * debian/postinst:
    - disable remote password authentication, since our username/password
      is well known
    - up the DHCP range to .50-.250
      + 200 addresses should be plenty enough
      + leave just a little more room, in case we ever fit more NUCs inside
        of an Orange Box
  * usr/share/doc/orange-box/examples/hadoop/02-hadoop.yaml,
    usr/share/doc/orange-box/examples/openstack/havanaOB.yaml:
    - merge from Ameet, more cleanly placing these services on the canvas
  * usr/lib/orange-box/patches/arp_ip_order.patch, usr/lib/orange-
    box/patches/try_amt_harder.patch:
    - add links to upstream bugs

 -- Dustin Kirkland <kirkland@ubuntu.com>  Tue, 22 Apr 2014 08:32:39 -0500

orange-box (1.7-0ubuntu1) unstable; urgency=medium

  * debian/postinst, debian/preinst:
    - do a slightly better job of creating the boot-resources link
    - take a few TODO nodes, per code review with Kiko
  * usr/share/doc/orange-box/examples/hadoop/02-hadoop.yaml,
    usr/share/doc/orange-box/examples/openstack/00-bootstrap.sh:
    - updated hadoop bundle from Ameet and Amir
  * debian/control, debian/postinst, debian/preinst, usr/bin/orange-box-
    setup-nat:
    - move nat setup to postinst
    - this allows us to set the debconf questions for iptables-persistent
      in the preinst, but actually install and configure nat in the postinst
    - also move the setup nat logic out to an executable, as this is something
      that might need to re-run from time to time

 -- Dustin Kirkland <kirkland@ubuntu.com>  Thu, 17 Apr 2014 17:17:19 -0500

orange-box (1.6-0ubuntu1) trusty; urgency=medium

  * debian/postinst, usr/lib/orange-box/patches/try_amt_harder.patch:
    - MAAS needs to try a bit harder to issue AMT tools
    - change patching

 -- Dustin Kirkland <kirkland@ubuntu.com>  Wed, 16 Apr 2014 18:41:21 -0500

orange-box (1.5-0ubuntu1) trusty; urgency=medium

  * usr/bin/orange-box-amt-monitor:
    - sort those ip address
  * === added directory etc/init, debian/postinst, etc/init/orange-box-
    amt-monitor.conf, usr/bin/orange-box-amt-monitor:
    - install an amt monitoring upstart job
  * debian/postinst:
    - make a copy of orange-box examples in the user's home directory
    - it seems that juju-deployer wants to create a directory (precise)
      in the current directory where deployed from, so this must be
      writeable

 -- Dustin Kirkland <kirkland@ubuntu.com>  Wed, 16 Apr 2014 17:34:19 -0500

orange-box (1.4-0ubuntu1) trusty; urgency=medium

  * debian/preinst:
    - add some pre-flight checks, to ensure that the OrangeBox is installed
      per spec
    - add the NAT basics in the network setup
    - enable both NAT and squid
  * usr/bin/orange-box-create-package-mirror, usr/bin/orange-box-setup-
    kvms, usr/bin/orange-box-setup-maas, usr/share/doc/orange-
    box/examples/openstack-complex/havana/04cleanup.sh,
    usr/share/doc/orange-box/examples/openstack-complex/juju-
    config/environments.yaml, usr/share/doc/orange-
    box/examples/openstack-complex/openstack-configuration/prepare-
    cloud, usr/share/doc/orange-box/examples/openstack-
    complex/openstack-prereqs-install.sh:
    - comprehensive replacement of 10.0.0.* with 10.14.4.*
  * usr/bin/orange-box-add-all-nodes:
    - doesn't look like we actually need the nodelists
    - use nmap to scan the network for ip's listening on 16992
    - use arp to translate these ip's to mac addresses
    - use a consistent naming scheme to create nodeN hostnames
    - profit
  * usr/bin/orange-box-add-all-nodes:
    - we use AMT_PASSWORD so much, put it in .bashrc
  * usr/bin/orange-box-setup-maas:
    - deprecated;  all functionality subsumed into postinst/preinst
  * debian/preinst, usr/lib/orange-box/inc/squid.conf:
    - setup squid
  * === renamed directory usr/share/doc/orange-box/examples/openstack-
    simple => usr/share/doc/orange-box/examples/openstack,
    usr/share/doc/orange-box/examples/openstack/01-deploy.sh,
    usr/share/doc/orange-box/examples/openstack/havanaOB.yaml,
    usr/share/doc/orange-box/examples/openstack-simple/00-demo-prep.sh
    => usr/share/doc/orange-box/examples/openstack/00-bootstrap.sh,
    usr/share/doc/orange-box/examples/openstack-simple/0X-demo-
    cleanup.sh => usr/share/doc/orange-box/examples/openstack/99-
    cleanup.sh:
    - updated Ameet's OpenStack example
    - note that these scripts worked perfectly as of 4/11/2014 at
      and 4/14/2014
  * debian/postinst:
    - let's not strict host check ssh keys on node1-node9, as these
      will be constantly changing
  * debian/control, debian/postinst, debian/preinst:
    - move squid setup to postinst
    - setup nat/networking in preinst, predepend on iptables
  * usr/bin/orange-box-add-all-nodes:
    - fix critical typo
  * debian/control, debian/postinst, debian/preinst:
    - install pastebinit; seems we always need this for debugging
    - move external drive setup to preinst, to make sure drive is mounted
      before importing
  * debian/postinst, debian/preinst:
    - ensure that network manager does not manage our internal ethernet
      adapter
    - block on importing maas pxe files;  MAAS won't be usable until this
      completes
  * === added directory usr/lib/orange-box/patches, debian/postinst,
    debian/preinst, usr/bin/orange-box-add-all-nodes, usr/lib/orange-
    box/patches/arp_ip_order.patch:
    - restart maas-cluster-celery to ensure it picks up pxe iso images
      imported
    - tgt was running, but seemed to be failing;  restart tgt before adding
      all nodes to maas
    - forcibly apply a one-line patch to maas, to work around tych0's
      arp-mac-to-ip bug
    - no need to put our external interface in /etc/network/interfaces, just
      let network-manager handle that one
    - on re-runs of add all nodes, fastpath tag might already be defined
  * debian/postinst, usr/bin/orange-box-amt-monitor,
    usr/share/doc/orange-box/examples/hadoop/00-bootstrap.sh (properties
    changed: -x to +x), usr/share/doc/orange-box/examples/hadoop/01-get-
    juju-gui-info.sh (properties changed: -x to +x),
    usr/share/doc/orange-box/examples/hadoop/03-run-terasort.sh
    (properties changed: -x to +x), usr/share/doc/orange-
    box/examples/hadoop/get-hadoop-info.sh (properties changed: -x to
    +x):
    - make hadoop example scripts executable
    - add resolv.conf information so that we can easily resolve maas
      node names
    - add an amt monitor script
  * debian/postinst:
    - add a symlink in ubuntu user's home directory to the examples
  * debian/postinst, usr/bin/orange-box-amt-monitor:
    - fix borked patch application
    - make the amt monitor only watch open amt ports

 -- Dustin Kirkland <kirkland@ubuntu.com>  Sat, 12 Apr 2014 00:17:47 -0500

orange-box (1.3-0ubuntu1) trusty; urgency=medium

  * debian/postinst:
    - make sure we chown the .juju directory to the ubuntu user
  * usr/share/doc/orange-box/examples/openstack-simple/00-demo-prep.sh:
    - show the debug log and upload tools when bootstrapping, otherwise
      FUCKING juju has to go out to the internet to download itself,
      FOR FUCKS SAKE
  * debian/postinst:
    - set an admin secret so that we can log into the juju gui
  * debian/control:
    - add juju-deployer to the master node, makes deploying bundles
      much easier
  * === added directory home, === added directory home/ubuntu, === added
    directory home/ubuntu/.remmina, debian/postinst,
    home/ubuntu/.remmina/1397230159112.remmina,
    home/ubuntu/.remmina/1397232305030.remmina,
    home/ubuntu/.remmina/1397232322839.remmina,
    home/ubuntu/.remmina/1397232362406.remmina,
    home/ubuntu/.remmina/1397232390677.remmina,
    home/ubuntu/.remmina/1397232407533.remmina,
    home/ubuntu/.remmina/1397232435909.remmina,
    home/ubuntu/.remmina/1397232455068.remmina,
    home/ubuntu/.remmina/1397232472197.remmina,
    home/ubuntu/.remmina/remmina.pref, usr/share/doc/orange-
    box/examples/openstack-simple/havanaOB.yaml:
    - install a working set of VNC configs

 -- Dustin Kirkland <kirkland@ubuntu.com>  Sat, 12 Apr 2014 00:17:44 -0500

orange-box (1.2-0ubuntu1) trusty; urgency=medium

  * debian/postinst:
    - reorder the checking of maas services; region must be up first
  * debian/postinst, usr/bin/orange-box-add-all-nodes, usr/lib/orange-
    box/inc/common:
    - move the error function to our common include
    - print a suggestion error message, if nmap finds no nodes listening
      on AMT
  * debian/postinst, usr/bin/orange-box-add-all-nodes:
    - change the IP range to 20-250, to allow for 11-19 for static AMT IPs
    - use a bulk method to mark all nodes as fastpath

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 10:13:33 -0500

orange-box (1.1-0ubuntu1) trusty; urgency=medium

  * debian/postinst:
    - handle the stop/start of the pserv and dhcp more robustly
    - create an error function, to bail out
    - create a function that tries to ensure certain services are running
    - ensure that ALL OF MAAS is running, before trying to add all nodes

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 08:30:22 -0500

orange-box (1.0-0ubuntu1) trusty; urgency=low

  * Initial packaging
  * debian/postinst:
    - move some of the setup maas configuration into the postinst
  * etc/apt/mirror.list => etc/apt/orange-box-mirror.list,
    etc/cron.d/apt-mirror => etc/cron.d/orange-box-mirror:
    - don't step on apt-mirror's default configuration file
  * === added directory etc/maas, debian/control, debian/postinst,
    etc/cron.d/orange-box-mirror, etc/maas/import_pxe_files:
    - add openssh-server as a dependency (which is not necessarily
      installed if we start from an Ubuntu desktop
    - refactor and expand the logic in postinst, ensure idempotency,
      add networking support
    - fix error in mirror cronjob
    - add import pxe conf file
  * debian/postinst, etc/network/interfaces.example, === removed
    directory etc/network:
    - add logic for getting the api key
    - setup maas admin first
    - fix syntax error in boot resources setup
    - remove the deprecated network interfaces sample
  * debian/control, debian/postinst, usr/share/orange-
    box/nodelists/CloudFive-nodelist => usr/share/orange-
    box/nodelists/OrangeBox05, usr/share/orange-box/nodelists/CloudFour-
    nodelist => usr/share/orange-box/nodelists/OrangeBox04,
    usr/share/orange-box/nodelists/CloudTwo-nodelist =>
    usr/share/orange-box/nodelists/OrangeBox02, usr/share/orange-
    box/nodelists/OrangeBox01:
    - add some dependencies for other tools we'll need
      + byobu, iptables-persistent, juju-core, wsmancli
    - try to list the maas network interfaces first, and keep trying
      until we can, and then update the network interfaces
    - make sure boot-resources symlink does not yet exist
    - generate an ssh key for the ubuntu user, and add it to maas
    - setup a juju environment for maas
    - rename all of the nodelists, to OrangeBox[00-05]
  * debian/postinst, usr/bin/orange-box-setup-nat:
    - rework our setup-nat script a bit; tested and working as
      designed, at this point
  * usr/bin/orange-box-add-all-nodes, usr/bin/orange-box-fastpath:
    - update add-all-nodes logic, use a small shell replacement for
      the fastpath python script; also tested and working as designed,
      at this point
  * debian/control, debian/postinst, debian/preinst, etc/apache2/sites-
    available/archive.conf, etc/apache2/sites-available/ubuntu-
    cloud.conf, usr/bin/orange-box-add-all-nodes, usr/lib/orange-
    box/inc/common:
    - add nmap, useful for telling which nodes have AMT listening
    - use set -x on a couple of our scripts for now
    - wait a few seconds to ensure networking is ready
    - disable nat setup for now
    - disable the default apache site, restart instead of reload
    - fix conditional syntax error
    - add all nodes in the postinst
    - add a preinst file that sets some debconf questions
    - update apache site configuration for apache 2.4, ffs
    - make add-all-nodes more robust
    - fix some maas-cli calls
  * debian/postinst, debian/preinst:
    - move the networking setup to preinst

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 07:20:25 -0500
