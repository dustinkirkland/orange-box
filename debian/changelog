orange-box (1.2) unreleased; urgency=medium

  * debian/postinst:
    - reorder the checking of maas services; region must be up first

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 08:30:24 -0500

orange-box (1.1-0ubuntu1) trusty; urgency=medium

  * debian/postinst:
    - handle the stop/start of the pserv and dhcp more robustly
    - create an error function, to bail out
    - create a function that tries to ensure certain services are running
    - ensure that ALL OF MAAS is running, before trying to add all nodes

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 08:30:22 -0500

orange-box (1.0-0ubuntu1) trusty; urgency=low

  * Initial packaging
  * debian/postinst:
    - move some of the setup maas configuration into the postinst
  * etc/apt/mirror.list => etc/apt/orange-box-mirror.list,
    etc/cron.d/apt-mirror => etc/cron.d/orange-box-mirror:
    - don't step on apt-mirror's default configuration file
  * === added directory etc/maas, debian/control, debian/postinst,
    etc/cron.d/orange-box-mirror, etc/maas/import_pxe_files:
    - add openssh-server as a dependency (which is not necessarily
      installed if we start from an Ubuntu desktop
    - refactor and expand the logic in postinst, ensure idempotency,
      add networking support
    - fix error in mirror cronjob
    - add import pxe conf file
  * debian/postinst, etc/network/interfaces.example, === removed
    directory etc/network:
    - add logic for getting the api key
    - setup maas admin first
    - fix syntax error in boot resources setup
    - remove the deprecated network interfaces sample
  * debian/control, debian/postinst, usr/share/orange-
    box/nodelists/CloudFive-nodelist => usr/share/orange-
    box/nodelists/OrangeBox05, usr/share/orange-box/nodelists/CloudFour-
    nodelist => usr/share/orange-box/nodelists/OrangeBox04,
    usr/share/orange-box/nodelists/CloudTwo-nodelist =>
    usr/share/orange-box/nodelists/OrangeBox02, usr/share/orange-
    box/nodelists/OrangeBox01:
    - add some dependencies for other tools we'll need
      + byobu, iptables-persistent, juju-core, wsmancli
    - try to list the maas network interfaces first, and keep trying
      until we can, and then update the network interfaces
    - make sure boot-resources symlink does not yet exist
    - generate an ssh key for the ubuntu user, and add it to maas
    - setup a juju environment for maas
    - rename all of the nodelists, to OrangeBox[00-05]
  * debian/postinst, usr/bin/orange-box-setup-nat:
    - rework our setup-nat script a bit; tested and working as
      designed, at this point
  * usr/bin/orange-box-add-all-nodes, usr/bin/orange-box-fastpath:
    - update add-all-nodes logic, use a small shell replacement for
      the fastpath python script; also tested and working as designed,
      at this point
  * debian/control, debian/postinst, debian/preinst, etc/apache2/sites-
    available/archive.conf, etc/apache2/sites-available/ubuntu-
    cloud.conf, usr/bin/orange-box-add-all-nodes, usr/lib/orange-
    box/inc/common:
    - add nmap, useful for telling which nodes have AMT listening
    - use set -x on a couple of our scripts for now
    - wait a few seconds to ensure networking is ready
    - disable nat setup for now
    - disable the default apache site, restart instead of reload
    - fix conditional syntax error
    - add all nodes in the postinst
    - add a preinst file that sets some debconf questions
    - update apache site configuration for apache 2.4, ffs
    - make add-all-nodes more robust
    - fix some maas-cli calls
  * debian/postinst, debian/preinst:
    - move the networking setup to preinst

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 11 Apr 2014 07:20:25 -0500
