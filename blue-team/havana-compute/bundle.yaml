havana-swift:
  series: precise
  overrides:
    openstack-origin: cloud:precise-havana
    source: cloud:precise-updates/havana
  services:
    ubuntu: 
      charm: cs:precise/ubuntu
      constraints: tags=nuc
    landscape-client:
      charm: cs:precise/landscape-client
      options:
        origin: ppa:landscape/trunk
        exchange-interval: 60
        urgent-exchange-interval: 30
        ping-interval: 10
        script-users: ALL
        include-manager-plugins: ScriptExecution
    lds:
      branch: lp:charms/lds-quickstart
      options:
        server_fqdn: lds.orangebox.org
        admin_email: admin@lds.orangebox.org
        admin_name: admin
        admin_password: Password1+
        license: include-file://license.txt
        sample_data: False
      constraints: tags=lds
    mysql:
      charm: cs:precise/mysql-29
      options:
        dataset-size: 50%
      to: lxc:ubuntu=0
    rabbitmq-server:
      charm: cs:precise/rabbitmq-server-16
      constraints: mem=1G
      to: lxc:ubuntu=0
    keystone:
      charm: cs:precise/keystone-23
      options:
        admin-password: Password1+
        admin-token: ubuntutesting
      to: lxc:ubuntu=0
    openstack-dashboard:
      charm: cs:precise/openstack-dashboard-11
      options:
        offline-compression: "no"
      to: lxc:ubuntu=0
    nova-compute:
      charm: cs:precise/nova-compute
      num_units: 7
      options:
        config-flags: "auto_assign_floating_ip=False"
        enable-live-migration: False
        virt-type: kvm
      contraints: tags=nuc
    nova-cloud-controller:
      charm: cs:precise/nova-cloud-controller-19
      options:
        network-manager: Neutron
        quantum-security-groups: "yes"
      to: lxc:ubuntu=0
    neutron-gateway:
      charm: cs:precise/quantum-gateway-12
      options:
        ext-port: eth1
      constraints: tags=neutron
    cinder:
      charm: cs:precise/cinder-14
      options:
        block-device: "None"
        overwrite: "true"
      to: lxc:ubuntu=0
    glance:
      charm: cs:precise/glance-26
      to: lxc:ubuntu=0
    ceilometer:
      charm: cs:precise/ceilometer
      to: lxc:ubuntu=0
    ceilometer-agent:
      charm: cs:precise/ceilometer-agent
    mongodb:
      charm: cs:precise/mongodb
      to: lxc:ubuntu=0
    ntp:
      charm: cs:precise/ntp
  relations:
    - - keystone
      - mysql
    - - nova-cloud-controller
      - mysql
    - - nova-cloud-controller
      - rabbitmq-server
    - - nova-cloud-controller
      - glance
    - - nova-cloud-controller
      - keystone
    - - nova-compute
      - nova-cloud-controller
    - - nova-compute
      - mysql
    - - nova-compute
      - rabbitmq-server:amqp
    - - nova-compute
      - glance
    - - glance
      - mysql
    - - glance
      - keystone
    - - glance
      - cinder
    - - cinder
      - mysql
    - - cinder
      - rabbitmq-server
    - - cinder
      - nova-cloud-controller
    - - cinder
      - keystone
    - - neutron-gateway
      - mysql
    - - neutron-gateway
      - rabbitmq-server
    - - neutron-gateway
      - nova-cloud-controller
    - - openstack-dashboard
      - keystone
    - - ceilometer
      - keystone
    - - ceilometer
      - rabbitmq-server
    - - ceilometer
      - mongodb
    - - ceilometer-agent:nova-ceilometer
      - nova-compute:nova-ceilometer
    - - ceilometer-agent:ceilometer-service
      - ceilometer:ceilometer-service
    - - ntp:juju-info
      - nova-compute:juju-info
    - - ntp:juju-info
      - nova-cloud-controller:juju-info
    - - ntp:juju-info
      - neutron-gateway:juju-info
    - - ntp:juju-info
      - cinder:juju-info
    - - ntp:juju-info
      - keystone:juju-info
    - - ntp:juju-info
      - glance:juju-info
    - - ntp:juju-info
      - ceilometer:juju-info
    - - ntp:juju-info
      - mongodb:juju-info
    - - ntp:juju-info
      - rabbitmq-server:juju-info
    - - ntp:juju-info
      - mysql:juju-info
    - - ntp:juju-info
      - openstack-dashboard:juju-info
    - - landscape-client:container
      - [ lds, neutron-gateway, mysql, cinder, keystone, rabbitmq-server, glance, openstack-dashboard, nova-cloud-controller, nova-compute ]
    - - landscape-client:registration
      - lds
